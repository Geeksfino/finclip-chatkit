# æç¤ºå¯åŠ¨å™¨æŒ‡å—

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•åœ¨ ChatKit ä¸­å®ç°å’Œé…ç½®æç¤ºå¯åŠ¨å™¨ã€‚æç¤ºå¯åŠ¨å™¨æ˜¯æ˜¾ç¤ºåœ¨æ–°å¯¹è¯é¡¶éƒ¨çš„é¢„å®šä¹‰å»ºè®®èŠ¯ç‰‡ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå¼€å§‹ä¸ AI åŠ©æ‰‹äº¤äº’ã€‚

> **ğŸ“˜ æ³¨æ„ï¼š** æç¤ºå¯åŠ¨å™¨åŸºäº ConvoUI çš„æç¤ºå¯åŠ¨å™¨ç³»ç»Ÿæ„å»ºã€‚æœ¬æŒ‡å—æ¶µç›–ä½¿ç”¨ ChatKit API çš„ Swift å’Œ Objective-C ä¸¤ç§å®ç°æ–¹å¼ã€‚

---

## ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
3. [ä½¿ç”¨ ChatKit API](#ä½¿ç”¨-chatkit-api)
4. [è‡ªå®šä¹‰å¯åŠ¨å™¨](#è‡ªå®šä¹‰å¯åŠ¨å™¨)
5. [æ ·å¼è®¾ç½®](#æ ·å¼è®¾ç½®)
6. [é«˜çº§ç”¨æ³•](#é«˜çº§ç”¨æ³•)
7. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
8. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## æ¦‚è¿°

### ä»€ä¹ˆæ˜¯æç¤ºå¯åŠ¨å™¨ï¼Ÿ

æç¤ºå¯åŠ¨å™¨æ˜¯æ˜¾ç¤ºåœ¨æ¶ˆæ¯åˆ—è¡¨é¡¶éƒ¨çš„æ°´å¹³æ»šåŠ¨èŠ¯ç‰‡ï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸‹æ˜¾ç¤ºï¼š
- èŠå¤©è§†å›¾æ–°åˆå§‹åŒ–
- å¯¹è¯ä¸­æœ‰ 0 æ¡ç”¨æˆ·æ¶ˆæ¯
- é€šè¿‡ SDK é…ç½®

**æ ¸å¿ƒè¡Œä¸º**ï¼šå¯åŠ¨å™¨åœ¨ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»æˆ–å‘é€æ¶ˆæ¯ï¼‰åæ€»æ˜¯éšè—ï¼Œå› ä¸ºä¸€æ—¦ç”¨æˆ·å‚ä¸ï¼Œå®ƒä»¬å°±å˜å¾—æ— å…³ç´§è¦ã€‚æ¨¡å¼ä¹‹é—´çš„åŒºåˆ«åœ¨äº**é‡æ–°æ˜¾ç¤ºèƒ½åŠ›**ï¼Œé€‚ç”¨äºä¸Šä¸‹æ–‡æ„ŸçŸ¥åœºæ™¯ã€‚

### ä¸»è¦ä¼˜åŠ¿

- **æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ** - å¼•å¯¼ç”¨æˆ·è¿›è¡Œæœ‰æ„ä¹‰çš„äº¤äº’
- **å‡å°‘æ‘©æ“¦** - å¸®åŠ©ç”¨æˆ·å¿«é€Ÿå¼€å§‹
- **å¯è‡ªå®šä¹‰** - å®Œå…¨æ§åˆ¶å†…å®¹ã€æ ·å¼å’Œè¡Œä¸º
- **è‡ªåŠ¨ç®¡ç†** - æ¡†æ¶å¤„ç†å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸ

### ä½¿ç”¨æ¡ˆä¾‹ç¤ºä¾‹

- **é€šç”¨èŠå¤©** - "å¸®æˆ‘åšç‚¹ä»€ä¹ˆ"ã€"å¤´è„‘é£æš´"ã€"è§£é‡ŠæŸäº‹"
- **é‚®ä»¶åŠ©æ‰‹** - "å†™ä¸€å°ä¸“ä¸šé‚®ä»¶"ã€"èµ·è‰ä¼šè®®è¯·æ±‚"
- **åˆ›æ„å·¥å…·** - "ç”Ÿæˆæ•…äº‹"ã€"åˆ›ä½œè¯—æ­Œ"ã€"è®¾è®¡å¾½æ ‡æ¦‚å¿µ"
- **ç”Ÿäº§åŠ›** - "è§„åˆ’æˆ‘çš„ä¸€å¤©"ã€"æ€»ç»“æ–‡æ¡£"ã€"è®¾ç½®æé†’"

---

## å¿«é€Ÿå¼€å§‹

### Swiftï¼šä½¿ç”¨å·¥å‚æ–¹æ³•

æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ `ChatKitPromptStarterFactory`ï¼š

```swift
import FinClipChatKit
import ConvoUI

var config = ChatKitConversationConfiguration.default
config.showStatusBanner = true
config.showWelcomeMessage = true

// ä½¿ç”¨å·¥å‚æ–¹æ³•åˆ›å»ºå¸¸è§å¯åŠ¨å™¨
config.promptStartersProvider = {
    ChatKitPromptStarterFactory.createExampleStarters()
}

let chatVC = ChatKitConversationViewController(
    record: record,
    conversation: conversation,
    coordinator: coordinator,
    configuration: config
)
```

### Objective-Cï¼šä½¿ç”¨å·¥å‚æ–¹æ³•

```objc
#import <FinClipChatKit/FinClipChatKit-Swift.h>

CKTConversationConfiguration *config = [CKTConversationConfiguration defaultConfiguration];
config.showStatusBanner = YES;
config.showWelcomeMessage = YES;

// ä½¿ç”¨å·¥å‚æ–¹æ³•åˆ›å»ºå¸¸è§å¯åŠ¨å™¨
config.promptStartersProvider = ^NSArray * _Nonnull {
    return [ChatKitPromptStarterFactory createExampleStarters];
};

ChatKitConversationViewController *chatVC = 
    [[ChatKitConversationViewController alloc] initWithObjCRecord:record
                                                     conversation:conversation
                                                  objcCoordinator:coordinator
                                                objcConfiguration:config];
```

---

## ä½¿ç”¨ ChatKit API

### ChatKitPromptStarterFactory

ChatKit æä¾›äº†ä¸€ä¸ªå·¥å‚ç±»ï¼ŒåŒ…å«é¢„é…ç½®çš„å¯åŠ¨å™¨é›†åˆï¼š

#### å¯ç”¨çš„å·¥å‚æ–¹æ³•

**1. `createDefaultStarters()`** - é€‚ç”¨äºé€šç”¨èŠå¤©åº”ç”¨çš„å¹³è¡¡é›†åˆï¼š

```swift
config.promptStartersProvider = {
    ChatKitPromptStarterFactory.createDefaultStarters()
}
```

è¿”å›ï¼š
- "å¸®æˆ‘åšç‚¹ä»€ä¹ˆ"ï¼ˆquestionmark.circle.fill å›¾æ ‡ï¼‰
- "å¤´è„‘é£æš´"ï¼ˆlightbulb.fill å›¾æ ‡ï¼Œ"åˆ›é€ æ€§æ€ç»´" å‰¯æ ‡é¢˜ï¼‰
- "è§£é‡ŠæŸäº‹"ï¼ˆbook.fill å›¾æ ‡ï¼Œ"ç®€å•åˆ†è§£" å‰¯æ ‡é¢˜ï¼‰

**2. `createExampleStarters()`** - ç±»ä¼¼ ChatGPT çš„ä¸°å¯Œé›†åˆï¼š

```swift
config.promptStartersProvider = {
    ChatKitPromptStarterFactory.createExampleStarters()
}
```

è¿”å›ï¼š
- "å†™ä¸€å°ä¸“ä¸šé‚®ä»¶"ï¼ˆenvelope.fill å›¾æ ‡ï¼‰
- "å¸®æˆ‘å¤´è„‘é£æš´"ï¼ˆlightbulb.fill å›¾æ ‡ï¼Œ"åˆ›é€ æ€§æ€ç»´å’Œé—®é¢˜è§£å†³" å‰¯æ ‡é¢˜ï¼‰
- "è§£é‡Šå¤æ‚ä¸»é¢˜"ï¼ˆbook.fill å›¾æ ‡ï¼Œ"ç®€å•åˆ†è§£" å‰¯æ ‡é¢˜ï¼‰
- "é«˜æ•ˆè§„åˆ’æˆ‘çš„ä¸€å¤©"ï¼ˆcalendar å›¾æ ‡ï¼‰

### ChatKitConversationConfiguration

é€šè¿‡ `ChatKitConversationConfiguration` é…ç½®æç¤ºå¯åŠ¨å™¨ï¼š

```swift
var config = ChatKitConversationConfiguration.default

// è®¾ç½®æç¤ºå¯åŠ¨å™¨æä¾›å™¨
config.promptStartersProvider = {
    // è¿”å› FinConvoPromptStarter æ•°ç»„
    return ChatKitPromptStarterFactory.createExampleStarters()
}

// å¯é€‰ï¼šå¤„ç†å¯åŠ¨å™¨é€‰æ‹©
config.onPromptStarterSelected = { starter in
    print("é€‰æ‹©çš„å¯åŠ¨å™¨ï¼š\(starter.starterId)")
    // è¿”å› false è‡ªåŠ¨å‘é€ï¼Œtrue é˜»æ­¢è‡ªåŠ¨å‘é€
    return false
}

// å¯é€‰ï¼šè‡ªå®šä¹‰æ ·å¼
let style = FinConvoPromptStarterStyle()
style.backgroundColor = .systemBlue
style.textColor = .white
style.cornerRadius = 25.0
config.promptStarterStyle = style

// å¯é€‰ï¼šé…ç½®è¡Œä¸ºæ¨¡å¼ï¼ˆé»˜è®¤ï¼š.autoHideï¼‰
// ä½¿ç”¨ .manual å…è®¸åœ¨ä¸Šä¸‹æ–‡æ›´æ”¹æ—¶ç¨‹åºåŒ–é‡æ–°æ˜¾ç¤ºå¯åŠ¨å™¨
config.promptStarterBehaviorMode = .manual

// å¯é€‰ï¼šæ’å…¥åˆ°è¾“å…¥æ¡†è€Œä¸æ˜¯è‡ªåŠ¨å‘é€ï¼ˆé»˜è®¤ï¼šfalseï¼‰
// å½“ä¸º true æ—¶ï¼Œç‚¹å‡»å¯åŠ¨å™¨ä¼šå°†æ–‡æœ¬æ’å…¥åˆ°è¾“å…¥æ¡†ä¸­ä¾›ç”¨æˆ·æŸ¥çœ‹/ç¼–è¾‘
config.promptStarterInsertToComposerOnTap = true
```

### è¡Œä¸ºæ¨¡å¼

ChatKit æ”¯æŒä¸¤ç§æç¤ºå¯åŠ¨å™¨è¡Œä¸ºæ¨¡å¼ï¼š

**è‡ªåŠ¨éšè—æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰ï¼š**
- å½“èŠå¤©ä¸ºç©ºæ—¶æ˜¾ç¤ºå¯åŠ¨å™¨
- åœ¨ç¬¬ä¸€æ¡ç”¨æˆ·æ¶ˆæ¯æˆ–ç‚¹å‡»åéšè—
- ä¸€æ—¦è¢«å…³é—­ï¼Œæ— æ³•å†æ¬¡æ˜¾ç¤º
- ä¼ ç»Ÿçš„"ä¸€æ¬¡æ€§"è¡Œä¸º
- é€‚ç”¨äºï¼šç®€å•èŠå¤©åº”ç”¨ï¼Œæ ‡å‡†ç”¨ä¾‹

**æ‰‹åŠ¨æ¨¡å¼ï¼š**
- å½“èŠå¤©ä¸ºç©ºæ—¶æ˜¾ç¤ºå¯åŠ¨å™¨
- åœ¨ç”¨æˆ·äº¤äº’åéšè—ï¼ˆä¸è‡ªåŠ¨éšè—ç›¸åŒï¼‰
- **å¯ä»¥ç¨‹åºåŒ–é‡æ–°æ˜¾ç¤º**ï¼Œå³ä½¿å­˜åœ¨æ¶ˆæ¯
- éå¸¸é€‚åˆä¸Šä¸‹æ–‡æ„ŸçŸ¥åº”ç”¨
- é€‚ç”¨äºï¼šæ ¹æ®ä¸Šä¸‹æ–‡/é€‰æ‹©æ›´æ”¹å¯åŠ¨å™¨çš„åº”ç”¨

### ç‚¹å‡»æ“ä½œ

æ§åˆ¶ç‚¹å‡»å¯åŠ¨å™¨æ—¶å‘ç”Ÿçš„æƒ…å†µï¼š

**è‡ªåŠ¨å‘é€ï¼ˆé»˜è®¤ï¼‰ï¼š**
- å¯åŠ¨å™¨æ ‡é¢˜è‡ªåŠ¨ä½œä¸ºæ¶ˆæ¯å‘é€
- ç«‹å³æ“ä½œï¼Œæ— éœ€å®¡æŸ¥æ­¥éª¤
- è®¾ç½® `promptStarterInsertToComposerOnTap = false`ï¼ˆé»˜è®¤ï¼‰

**æ’å…¥åˆ°è¾“å…¥æ¡†ï¼š**
- å¯åŠ¨å™¨æ ‡é¢˜æ’å…¥åˆ°è¾“å…¥æ¡†æ–‡æœ¬å­—æ®µ
- ç”¨æˆ·å¯ä»¥åœ¨å‘é€å‰æŸ¥çœ‹ã€ç¼–è¾‘å’Œæ·»åŠ ä¸Šä¸‹æ–‡
- æ¨èç”¨äºä¸Šä¸‹æ–‡æ„ŸçŸ¥åº”ç”¨
- è®¾ç½® `promptStarterInsertToComposerOnTap = true`

---

## è‡ªå®šä¹‰å¯åŠ¨å™¨

### åˆ›å»ºè‡ªå®šä¹‰å¯åŠ¨å™¨ï¼ˆSwiftï¼‰

```swift
config.promptStartersProvider = {
    [
        FinConvoPromptStarter(
            starterId: "email",
            title: "å†™ä¸€å°ä¸“ä¸šé‚®ä»¶",
            subtitle: nil,
            icon: UIImage(systemName: "envelope.fill"),
            payload: nil
        ),
        FinConvoPromptStarter(
            starterId: "brainstorm",
            title: "å¸®æˆ‘å¤´è„‘é£æš´",
            subtitle: "åˆ›é€ æ€§æ€ç»´",
            icon: UIImage(systemName: "lightbulb.fill"),
            payload: nil
        ),
        FinConvoPromptStarter(
            starterId: "explain",
            title: "è§£é‡Šå¤æ‚ä¸»é¢˜",
            subtitle: "ç®€å•åˆ†è§£",
            icon: UIImage(systemName: "book.fill"),
            payload: ["category": "education"]
        )
    ]
}
```

### åˆ›å»ºè‡ªå®šä¹‰å¯åŠ¨å™¨ï¼ˆObjective-Cï¼‰

```objc
config.promptStartersProvider = ^NSArray * _Nonnull {
    FinConvoPromptStarter *starter1 = [[FinConvoPromptStarter alloc] 
        initWithStarterId:@"email"
        title:@"å†™ä¸€å°ä¸“ä¸šé‚®ä»¶"
        subtitle:nil
        icon:[UIImage systemImageNamed:@"envelope.fill"]
        payload:nil];
    
    FinConvoPromptStarter *starter2 = [[FinConvoPromptStarter alloc] 
        initWithStarterId:@"brainstorm"
        title:@"å¸®æˆ‘å¤´è„‘é£æš´"
        subtitle:@"åˆ›é€ æ€§æ€ç»´"
        icon:[UIImage systemImageNamed:@"lightbulb.fill"]
        payload:nil];
    
    return @[starter1, starter2];
};
```

### FinConvoPromptStarter å±æ€§

- **`starterId`** (String) - å¯åŠ¨å™¨çš„å”¯ä¸€æ ‡è¯†ç¬¦
- **`title`** (String) - æ˜¾ç¤ºåœ¨èŠ¯ç‰‡ä¸Šçš„ä¸»è¦æ–‡æœ¬ï¼ˆå¿…éœ€ï¼‰
- **`subtitle`** (String?) - å¯é€‰çš„å‰¯æ ‡é¢˜æ–‡æœ¬
- **`icon`** (UIImage?) - å¯é€‰çš„å›¾æ ‡å›¾åƒ
- **`payload`** (Any?) - å¯é€‰çš„å¼€å‘è€…å…ƒæ•°æ®

---

## æ ·å¼è®¾ç½®

### ä½¿ç”¨ FinConvoPromptStarterStyle

è‡ªå®šä¹‰æç¤ºå¯åŠ¨å™¨èŠ¯ç‰‡çš„å¤–è§‚ï¼š

```swift
let style = FinConvoPromptStarterStyle()

// é¢œè‰²
style.backgroundColor = .systemBlue
style.textColor = .white
style.subtitleTextColor = .systemGray

// å­—ä½“
style.titleFont = UIFont.boldSystemFont(ofSize: 16)
style.subtitleFont = UIFont.systemFont(ofSize: 13)

// å¸ƒå±€
style.cornerRadius = 25.0
style.horizontalSpacing = 12.0
style.verticalSpacing = 12.0
style.contentInsets = UIEdgeInsets(top: 12, left: 16, bottom: 12, right: 16)
style.minimumHeight = 44.0

// å›¾æ ‡
style.iconSize = CGSize(width: 20, height: 20)

config.promptStarterStyle = style
```

### Objective-C æ ·å¼è®¾ç½®

```objc
FinConvoPromptStarterStyle *style = [[FinConvoPromptStarterStyle alloc] init];
style.backgroundColor = [UIColor systemBlueColor];
style.textColor = [UIColor whiteColor];
style.cornerRadius = 25.0;
style.titleFont = [UIFont boldSystemFontOfSize:16];

config.promptStarterStyle = style;
```

### é»˜è®¤æ ·å¼

å¦‚æœæœªæä¾›è‡ªå®šä¹‰æ ·å¼ï¼Œæ¡†æ¶ä½¿ç”¨ç±»ä¼¼ ChatGPT çš„é»˜è®¤æ ·å¼ï¼š
- èƒŒæ™¯ï¼š`systemGray5`
- æ–‡æœ¬ï¼š`systemLabel`
- åœ†è§’åŠå¾„ï¼š`20.0`
- å­—ä½“ï¼šç³»ç»Ÿå­—ä½“ï¼Œæ ‡é¢˜ 15pt ä¸­ç­‰ï¼Œå‰¯æ ‡é¢˜ 13pt å¸¸è§„

---

## é«˜çº§ç”¨æ³•

### ä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯åŠ¨å™¨ï¼ˆæ‰‹åŠ¨æ¨¡å¼ï¼‰

ä½¿ç”¨æ‰‹åŠ¨æ¨¡å¼æ ¹æ®ä¸Šä¸‹æ–‡æ˜¾ç¤ºä¸åŒçš„å¯åŠ¨å™¨ï¼š

```swift
var config = ChatKitConversationConfiguration.default

// å¯ç”¨æ‰‹åŠ¨æ¨¡å¼ä»¥è¿›è¡Œç¨‹åºåŒ–æ§åˆ¶
config.promptStarterBehaviorMode = .manual
config.promptStarterInsertToComposerOnTap = true

// åˆå§‹å¯åŠ¨å™¨
config.promptStartersProvider = {
    ChatKitPromptStarterFactory.createDefaultStarters()
}

let chatVC = ChatKitConversationViewController(
    record: record,
    conversation: conversation,
    coordinator: coordinator,
    configuration: config
)

// ç¨åï¼Œå½“ç”¨æˆ·é€‰æ‹©æ–‡æ¡£ä¸Šä¸‹æ–‡æ—¶
func onDocumentSelected(_ document: Document) {
    // æ ¹æ®æ–‡æ¡£ç±»å‹æ›´æ–°å¯åŠ¨å™¨
    let newStarters = [
        FinConvoPromptStarter(
            starterId: "summarize",
            title: "æ€»ç»“æ­¤æ–‡æ¡£",
            subtitle: nil,
            icon: UIImage(systemName: "doc.text"),
            payload: ["documentId": document.id]
        ),
        FinConvoPromptStarter(
            starterId: "analyze",
            title: "åˆ†æå…³é”®ç‚¹",
            subtitle: nil,
            icon: UIImage(systemName: "magnifyingglass"),
            payload: ["documentId": document.id]
        )
    ]
    
    // æ›´æ–°å¹¶æ˜¾ç¤ºæ–°å¯åŠ¨å™¨ï¼ˆåœ¨æ‰‹åŠ¨æ¨¡å¼ä¸‹å³ä½¿æœ‰æ¶ˆæ¯ä¹Ÿèƒ½å·¥ä½œï¼‰
    chatVC.chatView.updatePromptStarters(newStarters)
    chatVC.chatView.showPromptStarters()
}
```

### è‡ªå®šä¹‰é€‰æ‹©å¤„ç†

æ‹¦æˆªå¯åŠ¨å™¨é€‰æ‹©ä»¥æ·»åŠ è‡ªå®šä¹‰é€»è¾‘ï¼š

```swift
config.onPromptStarterSelected = { starter in
    // è®°å½•åˆ†æ
    Analytics.track("prompt_starter_selected", properties: [
        "starter_id": starter.starterId,
        "title": starter.title
    ])
    
    // ç‰¹å®šå¯åŠ¨å™¨çš„è‡ªå®šä¹‰å¤„ç†
    if starter.starterId == "special-starter" {
        // æ‰§è¡Œç‰¹æ®Šæ“ä½œ
        handleSpecialStarter(starter)
        return true // é˜»æ­¢è‡ªåŠ¨å‘é€
    }
    
    // é»˜è®¤ï¼šè‡ªåŠ¨å°†å¯åŠ¨å™¨æ ‡é¢˜ä½œä¸ºæ¶ˆæ¯å‘é€
    return false
}
```

### Objective-C é€‰æ‹©å¤„ç†

```objc
config.onPromptStarterSelected = ^BOOL(FinConvoPromptStarter *starter) {
    NSLog(@"é€‰æ‹©çš„å¯åŠ¨å™¨ï¼š%@", starter.starterId);
    
    // è‡ªå®šä¹‰é€»è¾‘
    if ([starter.starterId isEqualToString:@"special-starter"]) {
        [self handleSpecialStarter:starter];
        return YES; // é˜»æ­¢è‡ªåŠ¨å‘é€
    }
    
    return NO; // å…è®¸è‡ªåŠ¨å‘é€
};
```

### åŠ¨æ€å¯åŠ¨å™¨

æ ¹æ®ä¸Šä¸‹æ–‡æ›´æ–°å¯åŠ¨å™¨ï¼š

```swift
class ChatViewController: ChatKitConversationViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        
        // æ ¹æ®ç”¨æˆ·ä¸Šä¸‹æ–‡æ›´æ–°å¯åŠ¨å™¨
        updatePromptStarters()
    }
    
    private func updatePromptStarters() {
        let starters: [FinConvoPromptStarter]
        
        if userIsPremium {
            starters = createPremiumStarters()
        } else {
            starters = ChatKitPromptStarterFactory.createDefaultStarters()
        }
        
        chatView.setPromptStarters(starters)
    }
}
```

### ä½¿ç”¨ Payload å­˜å‚¨å…ƒæ•°æ®

åœ¨å¯åŠ¨å™¨ä¸­å­˜å‚¨è‡ªå®šä¹‰æ•°æ®ï¼š

```swift
let starter = FinConvoPromptStarter(
    starterId: "email",
    title: "å†™ä¸€å°ä¸“ä¸šé‚®ä»¶",
    subtitle: nil,
    icon: UIImage(systemName: "envelope.fill"),
    payload: [
        "category": "productivity",
        "difficulty": "easy",
        "estimatedTime": 2
    ]
)

// åœ¨é€‰æ‹©å¤„ç†ç¨‹åºä¸­è®¿é—® payload
config.onPromptStarterSelected = { starter in
    if let payload = starter.payload as? [String: Any],
       let category = payload["category"] as? String {
        print("ç±»åˆ«ï¼š\(category)")
    }
    return false
}
```

---

## æœ€ä½³å®è·µ

### 1. ä¿æŒæ ‡é¢˜ç®€æ´

**å¥½çš„ï¼š**
- "å†™ä¸€å°ä¸“ä¸šé‚®ä»¶"
- "å¸®æˆ‘å¤´è„‘é£æš´"
- "è§£é‡Šå¤æ‚ä¸»é¢˜"

**é¿å…ï¼š**
- "æˆ‘å¸Œæœ›æ‚¨å¸®æˆ‘å†™ä¸€å°ä¸“ä¸šé‚®ä»¶"ï¼ˆå¤ªé•¿ï¼‰
- "é‚®ä»¶"ï¼ˆå¤ªæ¨¡ç³Šï¼‰

### 2. ä½¿ç”¨æ¸…æ™°çš„åŠ¨ä½œåŠ¨è¯

ä»¥åŠ¨ä½œåŠ¨è¯å¼€å¤´ï¼š
- âœ… "å†™"ã€"è§£é‡Š"ã€"å¸®åŠ©"ã€"åˆ›å»º"ã€"è§„åˆ’"ã€"æ€»ç»“"
- âŒ "å…³äº"ã€"ä¿¡æ¯"ã€"è¯¦æƒ…"

### 3. æœ€ä½³æ•°é‡

- **3-6 ä¸ªå¯åŠ¨å™¨**æ˜¯æœ€ä½³çš„
- å¤ªå°‘ï¼ˆ1-2 ä¸ªï¼‰ï¼šé€‰é¡¹æœ‰é™
- å¤ªå¤šï¼ˆ7+ ä¸ªï¼‰ï¼šä»¤äººä¸çŸ¥æ‰€æªï¼Œæ»šåŠ¨å›°éš¾

### 4. ä½¿å…¶å…·ä½“

**å¥½çš„ï¼š**
- "å†™ä¸€å°ä¸“ä¸šé‚®ä»¶"
- "é«˜æ•ˆè§„åˆ’æˆ‘çš„ä¸€å¤©"
- "ç®€å•è§£é‡Šé‡å­ç‰©ç†"

**é¿å…ï¼š**
- "é‚®ä»¶"ï¼ˆå¤ªé€šç”¨ï¼‰
- "å¸®åŠ©"ï¼ˆä¸å¤Ÿå…·ä½“ï¼‰

### 5. ç­–ç•¥æ€§ä½¿ç”¨å‰¯æ ‡é¢˜

å‰¯æ ‡é¢˜é€‚ç”¨äºï¼š
- æ¾„æ¸…å¯åŠ¨å™¨çš„ç›®çš„
- æ·»åŠ ä¸Šä¸‹æ–‡æˆ–ç¤ºä¾‹
- è§£é‡Šé¢„æœŸç»“æœ

```swift
FinConvoPromptStarter(
    starterId: "brainstorm",
    title: "å¸®æˆ‘å¤´è„‘é£æš´",
    subtitle: "åˆ›é€ æ€§æ€ç»´å’Œé—®é¢˜è§£å†³", // å¢åŠ æ¸…æ™°åº¦
    icon: UIImage(systemName: "lightbulb.fill"),
    payload: nil
)
```

### 6. é€‰æ‹©é€‚å½“çš„å›¾æ ‡

ä½¿ç”¨ä¸å¯åŠ¨å™¨ç›®çš„åŒ¹é…çš„ SF Symbolsï¼š
- ğŸ“§ `envelope.fill` ç”¨äºé‚®ä»¶
- ğŸ’¡ `lightbulb.fill` ç”¨äºå¤´è„‘é£æš´
- ğŸ“– `book.fill` ç”¨äºè§£é‡Š
- ğŸ“… `calendar` ç”¨äºè§„åˆ’
- âœï¸ `pencil` ç”¨äºå†™ä½œ

### 7. åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸Šæµ‹è¯•

ç¡®ä¿æ°´å¹³æ»šåŠ¨åœ¨ä»¥ä¸‹è®¾å¤‡ä¸Šæ­£å¸¸å·¥ä½œï¼š
- iPhone SEï¼ˆå°å±å¹•ï¼‰
- iPhone Pro Maxï¼ˆå¤§å±å¹•ï¼‰
- iPadï¼ˆè¶…å®½å±å¹•ï¼‰

### 8. è€ƒè™‘æœ¬åœ°åŒ–

ä¸ºå›½é™…ç”¨æˆ·æä¾›æœ¬åœ°åŒ–æ ‡é¢˜ï¼š

```swift
config.promptStartersProvider = {
    [
        FinConvoPromptStarter(
            starterId: "email",
            title: NSLocalizedString("prompt_starter.email", comment: "å†™ä¸€å°ä¸“ä¸šé‚®ä»¶"),
            subtitle: nil,
            icon: UIImage(systemName: "envelope.fill"),
            payload: nil
        )
    ]
}
```

---

## æ•…éšœæ’é™¤

### å¯åŠ¨å™¨æœªæ˜¾ç¤º

**é—®é¢˜ï¼š** æç¤ºå¯åŠ¨å™¨æœªå‡ºç°åœ¨èŠå¤©è§†å›¾ä¸­ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… éªŒè¯ `promptStartersProvider` æ˜¯å¦åœ¨é…ç½®ä¸­è®¾ç½®
- âœ… æ£€æŸ¥å¯¹è¯æ˜¯å¦æœ‰ 0 æ¡ç”¨æˆ·æ¶ˆæ¯ï¼ˆå¯åŠ¨å™¨ä»…åœ¨æ–°å¯¹è¯ä¸­æ˜¾ç¤ºï¼‰
- âœ… ç¡®ä¿å¯åŠ¨å™¨æ•°ç»„ä¸ä¸ºç©º
- âœ… éªŒè¯é…ç½®æ˜¯å¦ä¼ é€’ç»™ `ChatKitConversationViewController` åˆå§‹åŒ–å™¨

### å¯åŠ¨å™¨æœªéšè—

**é—®é¢˜ï¼š** å‘é€æ¶ˆæ¯åå¯åŠ¨å™¨ä»ç„¶å¯è§ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… è¿™åº”è¯¥è‡ªåŠ¨å‘ç”Ÿ - æ£€æŸ¥æ¡†æ¶æ—¥å¿—
- âœ… éªŒè¯æ¶ˆæ¯æ˜¯å¦å®é™…å‘é€ï¼ˆæ£€æŸ¥å¯¹è¯çŠ¶æ€ï¼‰
- âœ… ç¡®ä¿åœ¨æ¶ˆæ¯å‘é€åæ²¡æœ‰æ‰‹åŠ¨æ˜¾ç¤ºå¯åŠ¨å™¨
- âœ… åœ¨è‡ªåŠ¨éšè—æ¨¡å¼ä¸‹ï¼Œå¯åŠ¨å™¨åº”è¯¥éšè—ä¸”æ— æ³•é‡æ–°æ˜¾ç¤º
- âœ… åœ¨æ‰‹åŠ¨æ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥ç¨‹åºåŒ–é‡æ–°æ˜¾ç¤ºï¼Œä½†å®ƒä»¬ä»ç„¶åœ¨ç”¨æˆ·äº¤äº’åéšè—

### è‡ªå®šä¹‰å›è°ƒæœªè°ƒç”¨

**é—®é¢˜ï¼š** `onPromptStarterSelected` å›è°ƒæœªè°ƒç”¨ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… éªŒè¯å›è°ƒæ˜¯å¦åœ¨è§†å›¾æ§åˆ¶å™¨åˆå§‹åŒ–ä¹‹å‰è®¾ç½®åœ¨é…ç½®ä¸Š
- âœ… æ£€æŸ¥å›è°ƒç­¾åæ˜¯å¦åŒ¹é…é¢„æœŸç±»å‹ï¼š`(FinConvoPromptStarter) -> Bool`
- âœ… ç¡®ä¿å›è°ƒä¸ä¸º `nil`

### æ ·å¼æœªåº”ç”¨

**é—®é¢˜ï¼š** è‡ªå®šä¹‰æ ·å¼è®¾ç½®æœªåœ¨ UI ä¸­åæ˜ ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… éªŒè¯ `promptStarterStyle` æ˜¯å¦åœ¨è§†å›¾æ§åˆ¶å™¨åˆå§‹åŒ–ä¹‹å‰è®¾ç½®
- âœ… æ£€æŸ¥æ ·å¼å±æ€§æ˜¯å¦æ­£ç¡®è®¾ç½®
- âœ… ç¡®ä¿æ ·å¼å¯¹è±¡ä¸ä¸º `nil`

### Objective-Cï¼šæ‰¾ä¸åˆ°å·¥å‚æ–¹æ³•

**é—®é¢˜ï¼š** `ChatKitPromptStarterFactory` æ–¹æ³•åœ¨ Objective-C ä¸­ä¸å¯è®¿é—®ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… ç¡®ä¿å¯¼å…¥ï¼š`#import <FinClipChatKit/FinClipChatKit-Swift.h>`
- âœ… ä½¿ç”¨ `@objc` æš´éœ²çš„æ–¹æ³•ï¼š`createDefaultStarters()` å’Œ `createExampleStarters()`
- âœ… æ£€æŸ¥æ˜¯å¦ä½¿ç”¨æ­£ç¡®çš„å·¥å‚ç±»å

---

## ç¤ºä¾‹

### å®Œæ•´çš„ Swift ç¤ºä¾‹

**ç¤ºä¾‹ 1ï¼šä¼ ç»Ÿè‡ªåŠ¨éšè—æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰**

```swift
import UIKit
import FinClipChatKit
import ConvoUI

final class ChatViewController: ChatKitConversationViewController {
    init(record: ConversationRecord, conversation: Conversation, coordinator: ChatKitCoordinator) {
        var config = ChatKitConversationConfiguration.default
        config.showStatusBanner = true
        config.showWelcomeMessage = true
        config.welcomeMessageProvider = { "ä½ å¥½ï¼ä»Šå¤©æˆ‘èƒ½ä¸ºæ‚¨åšäº›ä»€ä¹ˆï¼Ÿ" }
        
        // é…ç½®æç¤ºå¯åŠ¨å™¨ï¼ˆé»˜è®¤ï¼šè‡ªåŠ¨éšè—æ¨¡å¼ï¼Œè‡ªåŠ¨å‘é€ï¼‰
        config.promptStartersProvider = {
            ChatKitPromptStarterFactory.createExampleStarters()
        }
        
        // å¤„ç†å¯åŠ¨å™¨é€‰æ‹©
        config.onPromptStarterSelected = { starter in
            print("ç”¨æˆ·é€‰æ‹©ï¼š\(starter.title)")
            // è¿”å› false è‡ªåŠ¨å‘é€ï¼Œtrue é˜»æ­¢
            return false
        }
        
        // è‡ªå®šä¹‰æ ·å¼
        let style = FinConvoPromptStarterStyle()
        style.backgroundColor = .systemBlue
        style.textColor = .white
        style.cornerRadius = 25.0
        config.promptStarterStyle = style
        
        super.init(record: record, conversation: conversation, coordinator: coordinator, configuration: config)
    }
    
    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
}
```

**ç¤ºä¾‹ 2ï¼šä¸Šä¸‹æ–‡æ„ŸçŸ¥æ‰‹åŠ¨æ¨¡å¼**

```swift
final class DocumentChatViewController: ChatKitConversationViewController {
    init(record: ConversationRecord, conversation: Conversation, coordinator: ChatKitCoordinator) {
        var config = ChatKitConversationConfiguration.default
        
        // å¯ç”¨æ‰‹åŠ¨æ¨¡å¼ä»¥è¿›è¡Œä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯åŠ¨å™¨
        config.promptStarterBehaviorMode = .manual
        config.promptStarterInsertToComposerOnTap = true
        
        // åˆå§‹å¯åŠ¨å™¨
        config.promptStartersProvider = {
            ChatKitPromptStarterFactory.createDefaultStarters()
        }
        
        super.init(record: record, conversation: conversation, coordinator: coordinator, configuration: config)
    }
    
    func updateStartersForDocument(_ document: Document) {
        let documentStarters = [
            FinConvoPromptStarter(
                starterId: "summarize",
                title: "æ€»ç»“æ­¤æ–‡æ¡£",
                subtitle: nil,
                icon: UIImage(systemName: "doc.text"),
                payload: ["documentId": document.id]
            )
        ]
        
        // æ›´æ–°å¹¶æ˜¾ç¤ºæ–°å¯åŠ¨å™¨ï¼ˆåœ¨æ‰‹åŠ¨æ¨¡å¼ä¸‹æœ‰æ•ˆï¼‰
        chatView.updatePromptStarters(documentStarters)
        chatView.showPromptStarters()
    }
}
```

### å®Œæ•´çš„ Objective-C ç¤ºä¾‹

**ç¤ºä¾‹ 1ï¼šä¼ ç»Ÿè‡ªåŠ¨éšè—æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰**

```objc
#import <UIKit/UIKit.h>
#import <FinClipChatKit/FinClipChatKit-Swift.h>

@interface ChatViewController : ChatKitConversationViewController
@end

@implementation ChatViewController

- (instancetype)initWithRecord:(CKTConversationRecord *)record 
                  conversation:(id)conversation 
                   coordinator:(CKTChatKitCoordinator *)coordinator {
    CKTConversationConfiguration *config = [CKTConversationConfiguration defaultConfiguration];
    config.showStatusBanner = YES;
    config.showWelcomeMessage = YES;
    config.welcomeMessageProvider = ^NSString * _Nullable {
        return @"ä½ å¥½ï¼ä»Šå¤©æˆ‘èƒ½ä¸ºæ‚¨åšäº›ä»€ä¹ˆï¼Ÿ";
    };
    
    // é…ç½®æç¤ºå¯åŠ¨å™¨ï¼ˆé»˜è®¤ï¼šè‡ªåŠ¨éšè—æ¨¡å¼ï¼Œè‡ªåŠ¨å‘é€ï¼‰
    config.promptStartersProvider = ^NSArray * _Nonnull {
        return [ChatKitPromptStarterFactory createExampleStarters];
    };
    
    // å¤„ç†å¯åŠ¨å™¨é€‰æ‹©
    config.onPromptStarterSelected = ^BOOL(FinConvoPromptStarter *starter) {
        NSLog(@"ç”¨æˆ·é€‰æ‹©ï¼š%@", starter.title);
        return NO; // å…è®¸è‡ªåŠ¨å‘é€
    };
    
    // è‡ªå®šä¹‰æ ·å¼
    FinConvoPromptStarterStyle *style = [[FinConvoPromptStarterStyle alloc] init];
    style.backgroundColor = [UIColor systemBlueColor];
    style.textColor = [UIColor whiteColor];
    style.cornerRadius = 25.0;
    config.promptStarterStyle = style;
    
    self = [super initWithObjCRecord:record
                         conversation:conversation
                      objcCoordinator:coordinator
                    objcConfiguration:config];
    return self;
}

@end
```

**ç¤ºä¾‹ 2ï¼šä¸Šä¸‹æ–‡æ„ŸçŸ¥æ‰‹åŠ¨æ¨¡å¼**

```objc
@interface DocumentChatViewController : ChatKitConversationViewController
@end

@implementation DocumentChatViewController

- (instancetype)initWithRecord:(CKTConversationRecord *)record 
                  conversation:(id)conversation 
                   coordinator:(CKTChatKitCoordinator *)coordinator {
    CKTConversationConfiguration *config = [CKTConversationConfiguration defaultConfiguration];
    
    // å¯ç”¨æ‰‹åŠ¨æ¨¡å¼ä»¥è¿›è¡Œä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯åŠ¨å™¨
    config.promptStarterBehaviorMode = FinConvoPromptStarterBehaviorModeManual;
    config.promptStarterInsertToComposerOnTap = YES;
    
    // åˆå§‹å¯åŠ¨å™¨
    config.promptStartersProvider = ^NSArray * _Nonnull {
        return [ChatKitPromptStarterFactory createDefaultStarters];
    };
    
    self = [super initWithObjCRecord:record
                         conversation:conversation
                      objcCoordinator:coordinator
                    objcConfiguration:config];
    return self;
}

- (void)updateStartersForDocument:(Document *)document {
    FinConvoPromptStarter *starter = [[FinConvoPromptStarter alloc]
        initWithStarterId:@"summarize"
        title:@"æ€»ç»“æ­¤æ–‡æ¡£"
        subtitle:nil
        icon:[UIImage systemImageNamed:@"doc.text"]
        payload:@{@"documentId": document.id}];
    
    // æ›´æ–°å¹¶æ˜¾ç¤ºæ–°å¯åŠ¨å™¨ï¼ˆåœ¨æ‰‹åŠ¨æ¨¡å¼ä¸‹æœ‰æ•ˆï¼‰
    [self.chatView updatePromptStarters:@[starter]];
    [self.chatView showPromptStarters];
}

@end
```

---

## ç›¸å…³æ–‡æ¡£

- **[å¼€å‘è€…æŒ‡å—](./developer-guide.zh.md)** - å®Œæ•´çš„ ChatKit å¼€å‘æŒ‡å—
- **[Objective-C æŒ‡å—](./objective-c-guide.zh.md)** - Objective-C ç‰¹å®šæ¨¡å¼
- **[ä¸Šä¸‹æ–‡æä¾›å™¨æŒ‡å—](./context-providers.zh.md)** - å‘æ¶ˆæ¯æ·»åŠ ä¸Šä¸‹æ–‡
- **[ç»„ä»¶åµŒå…¥](../component-embedding.zh.md)** - åµŒå…¥èŠå¤©ç»„ä»¶

---

## æ¼”ç¤ºåº”ç”¨

å·¥ä½œç¤ºä¾‹å¯åœ¨æ¼”ç¤ºåº”ç”¨ä¸­æ‰¾åˆ°ï¼š

- **Simple (Swift)ï¼š** å‚è§ `demo-apps/iOS/Simple/App/ViewControllers/ChatViewController.swift`
- **MyChatGPTï¼š** å‚è§ `chatkit/Examples/MyChatGPT/` è·å–å®Œæ•´çš„æç¤ºå¯åŠ¨å™¨å®ç°

---

---

## é…ç½®å‚è€ƒ

### ChatKitConversationConfiguration å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `promptStartersProvider` | `() -> [FinConvoPromptStarter]?` | `nil` | è¿”å›å¯åŠ¨å™¨æ•°ç»„çš„æä¾›å™¨å‡½æ•° |
| `onPromptStarterSelected` | `(FinConvoPromptStarter) -> Bool?` | `nil` | ç‚¹å‡»å¯åŠ¨å™¨æ—¶çš„å›è°ƒã€‚è¿”å› `true` ä»¥é˜»æ­¢è‡ªåŠ¨å‘é€ |
| `promptStarterStyle` | `FinConvoPromptStarterStyle?` | `nil` | è‡ªå®šä¹‰æ ·å¼é…ç½® |
| `promptStarterBehaviorMode` | `FinConvoPromptStarterBehaviorMode` | `.autoHide` | è¡Œä¸ºæ¨¡å¼ï¼š`.autoHide` æˆ– `.manual` |
| `promptStarterInsertToComposerOnTap` | `Bool` | `false` | å½“ä¸º `true` æ—¶ï¼Œå°†æ–‡æœ¬æ’å…¥åˆ°è¾“å…¥æ¡†è€Œä¸æ˜¯è‡ªåŠ¨å‘é€ |

### CKTConversationConfiguration å±æ€§ï¼ˆObjective-Cï¼‰

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `promptStartersEnabled` | `BOOL` | `NO` | æ˜¯å¦å¯ç”¨æç¤ºå¯åŠ¨å™¨ |
| `promptStarters` | `NSArray<FinConvoPromptStarter *>?` | `nil` | æç¤ºå¯åŠ¨å™¨æ•°ç»„ |
| `promptStarterBehaviorMode` | `FinConvoPromptStarterBehaviorMode` | `FinConvoPromptStarterBehaviorModeAutoHide` | è¡Œä¸ºæ¨¡å¼ |
| `promptStarterInsertToComposerOnTap` | `BOOL` | `NO` | æ’å…¥åˆ°è¾“å…¥æ¡†è€Œä¸æ˜¯è‡ªåŠ¨å‘é€ |

---

**æœ€åæ›´æ–°**ï¼š2025 å¹´ 11 æœˆ  
**ChatKit ç‰ˆæœ¬**ï¼š0.9.0+

